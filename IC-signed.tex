%!TEX root = synchrony.tex

\section{Interactive Consistency With Signed Messages}\label{signedMessage}

In this section we present the tight bound for a $( n,m,d )$-system to
reach \tmem{interactive consistency} with \tmem{signed messages}. In this new setting,
we have the following main result:

\begin{theorem}
  \label{consensusSigned} It is possible to achieve  interactive consistency
  in a $( n,m,d )$-system with signed messages  if and only if $n> 2d+m$.
\end{theorem}

As in the previous section, we rely on $2$ steps to prove this result.  We provide an algorithm, resp. a counterexample,  to prove  the sufficient, resp. the necessary property. 

The algorithm, called SMIC, is simple  and terminates in 3 rounds.


\subsection{Algorithm}
In the algorithm, called SMIC, each process $i$ maintains a list $V_{j}$, containing the possible initial values of process $j$.
{\namedalgorithm{SMIC}{\begin{enumeratenumeric}
  \item Every process broadcasts its initial values to all other
  processes (with its signature).
  
  \item Every process broadcasts the messages received in Step $1$ with its 
  signature to all processes.
  
  \item Every process broadcasts the messages received in Step $2$ with its 
  signature to all processes.
\end{enumeratenumeric}
After this, every process $i$ has received messages like $\sigma ( j k l i
)$. For every $j,k$, if $\{ \sigma ( j k l i )\}_l$ have the same value $v$ for
different $l$, then 
%$i$ thinks the value $\sigma ( j k )$ is $v$ and 
$i$ appends $v$ into $V_{j}$ as the value $k$ received from $j$. 
%After $i$ checked this for all $j,k$, 
$i$ decides  for $j$ the 
%
%the initial
%value of $j$ to be the 
majority value in $V_{j}$.}}

\begin{lemma}
  If $n>m+2d$, a $(n,m,d)$-system can reach interactive consistency with signed
  messages.
\end{lemma}

\begin{proof}
  If $j$ is correct, all the values $\sigma ( j k l i )$ will be the
  initial value of $j$ since the signature of $j$ can not be forged. So all the entries in $V_j$ are set to $\sigma (j)$, and the majority of $V_{j}$ is still $v$.
  
  If $j$ is faulty, suppose the initial value is $v$, as $n>m+2d$ at least $d+1$
  correct processes $\{k_1,...,k_{d+1}\}$ will receive $\sigma( j  k_{s}) = \sigma(j)$ equal to $v$. Since $k_s$ is correct, $\{\sigma(j k_s l i)\}_l$ are all $v$. This
  will contribute to at least $d+1$ values $v$ in $V_{j}$. On the other
  hand, only when $\sigma ( j k )$ is different from
  $v$, $k$ can contribute different values in $V_{j}$, because every $\sigma(j k)$ is always correctly sent to a subset of correct processes. Since $j$ can send at
  most $d$ wrong values in the first broadcast, $V_{j}$ contains at most $d$
  different values from $v$, which leads the majority value of $V_{j}$ to be
  $v$.
\end{proof}

Therefore the sufficient part of Theorem~\ref{consensusSigned} is proved. Now let us move to the necessary part.

\subsection{Impossibility}

Note that the two scenarios that we used in the proof of Lemma~\ref{imposs:1}
are now impossible. The processes in set $B$ cannot send to processes in set $C$ a message 
where they pretend that the initial values of processes in set $A$ are not the initial value that processes in $A$ have sent.

\begin{lemma}\label{imposs:3}
  If $n \leqslant m+2d$, it is impossible to achieve interactive consistency in a $(n,m,d)$-system with signed messages.
\end{lemma}


The proof of this necessary property of Theorem~\ref{consensusSigned} is similar to that of Lemma \ref{imposs:1}. Duo to space limitation, it is moved to Appendix \ref{app:imposs:3}.
